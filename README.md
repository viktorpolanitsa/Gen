# The Praxis AutoBuilder Gentoo

## От Live CD до полностью рабочего и оптимизированного десктопа Gentoo Linux в одну команду

Praxis AutoBuilder Gentoo — это полностью автоматический скрипт, созданный для установки Gentoo Linux. Он разработан с особым акцентом на надежность, производительность и простоту использования, беря на себя все рутинные и сложные этапы установки. Благодаря ему вы сможете получить готовую к работе систему XFCE всего за несколько часов, а не дней.

## Ключевые особенности

* **Полная автоматизация:** После интерактивной настройки в начале, скрипт работает автономно до самого конца.
* **Высокая надежность:** Встроенные проверки, обработка ошибок и отказоустойчивые механизмы (например, автоматический поиск рабочего stage3-архива) делают его чрезвычайно надежным.
* **Оптимизация под железо:** Скрипт не только устанавливает систему, но и настраивает ее для максимальной производительности на вашем оборудовании, включая специфичные флаги компилятора (-march, CPU_FLAGS_X86) и USE-флаги для аппаратного ускорения.
* **Универсальность:** Автоматически определяет режим загрузки (UEFI или Legacy BIOS) и корректно размечает диск, обеспечивая совместимость с различными конфигурациями.
* **Готовый десктоп:** Устанавливает полноценное рабочее окружение XFCE, браузер Firefox, NetworkManager и все необходимые утилиты, создавая удобный и готовый к использованию рабочий стол.
* **Дружелюбный интерфейс:** Цветной и структурированный вывод в консоль позволяет легко отслеживать процесс установки.

⚠️ ВНИМАНИЕ: СКРИПТ ДЕСТРУКТИВЕН ⚠️

Этот скрипт полностью и безвозвратно уничтожит все данные на выбранном диске. Используйте его на свой страх и риск. Настоятельно рекомендуется запускать его на чистом диске или в виртуальной машине. Автор не несет ответственности за потерю данных.

## Требования

- Загрузочный носитель Gentoo Live CD/Live USB.
- Стабильное подключение к интернету в Live-окружении.
- Целевой компьютер с x86-64 архитектурой.
- Знание имени целевого диска (например, /dev/sda или /dev/nvme0n1).

## Как использовать

1. Загрузитесь с Gentoo Minimal Installation CD.
2. Подключите интернет. Если у вас проводное подключение, скорее всего, оно заработает автоматически (проверьте командой ping gentoo.org). Для Wi-Fi используйте wpa_supplicant или nmtui.
3. Скачайте скрипт. Откройте терминал и выполните:

```bash
wget -O Praxis.sh https://raw.githubusercontent.com/viktorpolanitsa/Gen/refs/heads/main/Praxis.sh
```

4. Сделайте скрипт исполняемым:

```bash
chmod +x Praxis.sh
```

5. Запустите скрипт от имени root:

```bash
sudo bash Praxis.sh
```

6. Следуйте инструкциям интерактивного мастера настройки. Вам нужно будет ответить на несколько простых вопросов. После этого просто наблюдайте за магией!

## Процесс установки

Скрипт разделен на логические этапы для максимальной прозрачности:

Этап 0: Подготовка и настройка
- Проверка системы и зависимостей.
- Интерактивный мастер для сбора конфигурации (целевой диск, часовой пояс, MAKEOPTS и т.д.).
- Полная очистка и разметка диска для UEFI или Legacy BIOS.

Этап 1: Развертывание базовой системы
- Поиск, скачивание и проверка самого свежего stage3-архива.
- Распаковка архива в корневой раздел.

Этап 2: Подготовка Chroot
- Создание оптимального make.conf на основе ваших ответов.
- Настройка Portage и репозиториев.
- Монтирование виртуальных файловых систем.
- "Бесшовный" переход внутрь новой системы (chroot) для продолжения установки.

Этапы 3-7: Сборка и настройка в Chroot
- Синхронизация дерева Portage.
- Настройка локали и времени.
- Двойная компиляция @world: первая — для базовой системы, вторая — с учетом тонких оптимизаций под ваш CPU (CPU_FLAGS_X86).
- Установка и настройка ядра Linux через genkernel.
- Установка загрузчика GRUB.
- Установка рабочего стола XFCE и дополнительного ПО.
- Настройка системных служб, sudo и создание вашего пользователя.

## Оптимизация под ваше железо

Текущая версия скрипта по умолчанию настроена для APU AMD A10-9600P, используя -march=bdver4. Если у вас другое оборудование, вы легко можете это изменить.

Когда скрипт спросит:
```bash
Enter CPU architecture (-march) [Default: bdver4]:
```

Просто введите `native` (для автоматического определения) или укажите архитектуру вашего процессора (например, `znver2` для AMD Ryzen 3000, `icelake-client` для Intel Core 10-го поколения).

## Участие в проекте

Вы можете помочь улучшить этот скрипт! Если у вас есть идеи, предложения или вы нашли ошибку, пожалуйста, создайте Issue или отправьте Pull Request.
